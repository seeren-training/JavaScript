<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <title>Chapitre 16: Qualit&#xE9; du code - Formation JavaScript Initiation</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="css/33d0c34f96e6afed4baa666fd7bfab67.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="css/f786f0fa752fdc2603a99d15b85cb5fd.css" media="all and (orientation: portrait)"/>
  </head>
  <body>
    <div class="chapitre-content" id="ch_16">
      <h2>
        <span>Chapitre 16:</span>
        <a>Qualit&#xE9; du code</a>
      </h2>
      <div class="content-box">
        <strong>Documentation</strong>
        <p>Les commentaires peuvent jouer un r&#xF4;le important. En formatant les commentaires d'un script et en utilisant les expressions attendues il est possible de le documenter. Cette documentation peut ensuite &#xEA;tre g&#xE9;n&#xE9;r&#xE9;e comme nous allons le voir dans ce chapitre.</p>
        <p>Les applications pour documenter du JavaScript sont nombreuses, en travaillant sur un IDE qui poss&#xE8;de d&#xE9;j&#xE0; un documentator il est possible de passer directement par l'environnement de d&#xE9;veloppement pour g&#xE9;n&#xE9;rer une documentation. Dans ce chapitre JSDoc est utilis&#xE9; et nous d&#xE9;taillerons son installation &#xE0; la fin du chapitre.</p>
      </div>
      <h3 id="c_16_doc">Documenter le code source</h3>
      <div class="content-box">
        <p>Pour relier de la documentation sur des portions du code, il suffit de formater des commentaires comme dans l'exemple ci-dessous.</p>
      </div>
      <div class="content-code">
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;Documentation
<br/>&#xA0;*/</span>
</span>
</code>
      </div>
      <div class="content-box">
        <h4>Tags</h4>
        <p>Les tags sont pr&#xE9;fix&#xE9;s par le caract&#xE8;re @, il servent &#xE0; pr&#xE9;ciser la documentation pour des comportements ou des &#xE9;l&#xE9;ments du bloc &#xE0; annoter, comme des param&#xE8;tres ou la valeur de retour du bloc.</p>
      </div>
      <div class="content-code">
        <strong>@var</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;Une&#xA0;variable&#xA0;globale
<br/>&#xA0;*&#xA0;@var&#xA0;{string}&#xA0;variable
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">var&#xA0;</span><span style="color: #ffffff">variable&#xA0;</span><span style="color: #ffcc00">=&#xA0;</span><span style="color: #2aa198">"Hello"</span><span style="color: #ffcc00">;</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Le tag @var est un synonyme de @membre. Les tags peuvent d&#xE9;crire une constante avec le tag @constant, un type peut &#xEA;tre d&#xE9;crit avec le tag @type.</p>
      </div>
      <div class="content-code">
        <strong>@constant</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;Une&#xA0;constante
<br/>&#xA0;*&#xA0;@constant&#xA0;CONST
<br/>&#xA0;*&#xA0;@type&#xA0;{string}
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">const&#xA0;CONST&#xA0;=&#xA0;</span><span style="color: #2aa198">"Hello"</span><span style="color: #ffcc00">;</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Les fonctions sont comment&#xE9;es par les m&#xEA;mes blocs, le tag @param d&#xE9;crit un param&#xE8;tre, le tag @returns d&#xE9;crit la valeur de retour.</p>
      </div>
      <div class="content-code">
        <strong>@param, @returns</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;@param&#xA0;{Event}&#xA0;event&#xA0;Description&#xA0;de&#xA0;event
<br/>&#xA0;*&#xA0;@returns&#xA0;{boolean}&#xA0;Return&#xA0;description
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">function&#xA0;</span><span style="color: #ffffff">fonction&#xA0;</span><span style="color: #ffcc00">(</span><span style="color: #ffffff">event</span><span style="color: #ffcc00">)&#xA0;{
<br/>&#xA0;&#xA0;&#xA0;&#xA0;return&#xA0;</span><span style="color: #ffffff">true</span><span style="color: #ffcc00">;
<br/>}</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Le tag @throws documente la lev&#xE9;e d'une exception.</p>
      </div>
      <div class="content-code">
        <strong>@throws</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;@throws&#xA0;{Error}&#xA0;Si&#xA0;n&#xA0;vaut&#xA0;false
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">function&#xA0;</span><span style="color: #ffffff">fonction&#xA0;</span><span style="color: #ffcc00">(</span><span style="color: #ffffff">n</span><span style="color: #ffcc00">)&#xA0;{
<br/>&#xA0;&#xA0;&#xA0;&#xA0;if&#xA0;(!</span><span style="color: #ffffff">n</span><span style="color: #ffcc00">)&#xA0;{
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;throw&#xA0;new&#xA0;</span><span style="color: #ffffff">Error</span><span style="color: #ffcc00">();
<br/>&#xA0;&#xA0;&#xA0;&#xA0;}
<br/>}</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Le tag @namespace permet de qualifier un espace de nom, soit de d&#xE9;clarer l'appartenance &#xE0; un espace de nom.</p>
      </div>
      <div class="content-code">
        <strong>@namespace</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;Mon&#xA0;espace&#xA0;de&#xA0;nom
<br/>&#xA0;*&#xA0;@namespace
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">var&#xA0;</span><span style="color: #ffffff">MonEspaceDeNom&#xA0;</span><span style="color: #ffcc00">=&#xA0;{
<br/>&#xA0;&#xA0;&#xA0;&#xA0;
<br/>};</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Le tag @constructor documente un constructeur.</p>
      </div>
      <div class="content-code">
        <strong>@class</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;Un&#xA0;champ&#xA0;de&#xA0;formulaire
<br/>&#xA0;*&#xA0;@constructor
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">function&#xA0;</span><span style="color: #ffffff">Input</span><span style="color: #ffcc00">()&#xA0;{
<br/>}</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>La visibilit&#xE9; des membres se d&#xE9;crivent en utilisant les tag @private, @protected, @public.</p>
      </div>
      <div class="content-code">
        <strong>@private, @protected, @public</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
</span><span style="color: #8c8c8c">/**
<br/>&#xA0;*&#xA0;@constructor
<br/>&#xA0;*/
<br/></span><span style="color: #ffcc00">function&#xA0;</span><span style="color: #ffffff">Input</span><span style="color: #ffcc00">()&#xA0;{
<br/>
<br/>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #8c8c8c">/**
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;*&#xA0;@private
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;*/
<br/>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #ffcc00">var&#xA0;</span><span style="color: #ffffff">pattern</span><span style="color: #ffcc00">;
<br/>
<br/>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #8c8c8c">/**
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;*&#xA0;@protected
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;*/
<br/>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #ffffff">this</span><span style="color: #ffcc00">.</span><span style="color: #ffffff">validate</span><span style="color: #ffcc00">;
<br/>
<br/>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #8c8c8c">/**
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;*&#xA0;@public
<br/>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;*/
<br/>&#xA0;&#xA0;&#xA0;&#xA0;</span><span style="color: #ffffff">this</span><span style="color: #ffcc00">.</span><span style="color: #ffffff">value</span><span style="color: #ffcc00">;
<br/>
<br/>}</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>La visibilit&#xE9; des membres peut aussi se documenter avec le tag @access.</p>
      </div>
      <div class="content-box">
        <h4>Utilit&#xE9;</h4>
        <p>Le principe du fonctionnement d'une documentation par tag est expos&#xE9;, l'ensemble des tags ne va pas &#xEA;tre list&#xE9; et ils sont disponibles &#xE0; l'adresse http://usejsdoc.org/index.html#block-tags</p>
      </div>
      <div class="content-box">
        <strong>IDE</strong>
        <p>Il y a trois principaux avantages &#xE0; tirer d'un code document&#xE9;. A sa lecture le code est compr&#xE9;hensible par diff&#xE9;rents d&#xE9;veloppeurs pour le m&#xEA;me fichier, il est auto document&#xE9;. En documentant, un environnement de d&#xE9;veloppement va reconnaitre la documentation, lors du survol d'une signature document&#xE9;e en maintenant la touche ctrl enfonc&#xE9;e, une &#xE9;tiquette apparait avec la documentation analys&#xE9;e, lors de la saisie d'une fonction, m&#xE9;thode ou propri&#xE9;t&#xE9; document&#xE9;e, une &#xE9;tiquette affiche la documentation et peut proposer une aider &#xE0; la saisie, une auto compl&#xE9;tion et peut avertir d'un mauvais appel d'une fonction en analysant les arguments utilis&#xE9;s et en les comparants &#xE0; ceux pr&#xE9;sents dans la documentation par exemple.</p>
        <strong>Documents</strong>
        <p>En documentant selon la syntaxe propos&#xE9;e par un documentator il est possible de g&#xE9;n&#xE9;rer une documentation sous forme de fichiers de fa&#xE7;on automatique. Nous allons voir comment installer et g&#xE9;n&#xE9;rer une documentation avec JSDoc.</p>
      </div>
      <h3 id="c_16_generation">G&#xE9;n&#xE9;rer une documentation</h3>
      <div class="content-box">
        <strong>Node</strong>
        <p>Node est une plate-forme logicielle permettant d'utiliser JavaScript cot&#xE9; serveur. La plate-forme  peut se t&#xE9;l&#xE9;charger et s'installer rapidement via un ex&#xE9;cutable disponible &#xE0; l'adresse https://nodejs.org/en/download/</p>
        <strong>JSDoc</strong>
        <p>Une fois Node install&#xE9;e nous pouvons installer JSDoc3 mais pour ce faire nous allons utiliser l'invite de commande.</p>
        <p>Pour utiliser l'invite de commande sur window, dans la barre de recherche du menu d&#xE9;marrer il suffit de taper "cmd" pour que l&#x2019;ic&#xF4;ne de raccourci s'affiche dans la liste des r&#xE9;sultats. Il faut poss&#xE9;der les droits d&#x2019;administration en vue d'installer JSDoc3, nous effectuons un clic droit sur le raccourci de l'invite de commande et s&#xE9;lectionnons "Ex&#xE9;cuter entant qu'administrateur".</p>
        <p>Une fois l'invite de commande ouvert, la premi&#xE8;re chose est de sp&#xE9;cifier le r&#xE9;pertoire racine de node en sp&#xE9;cifiant  cd suivi du chemin vers le r&#xE9;pertoire.</p>
      </div>
      <div class="content-code">
        <strong>cd</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
cd&#xA0;disque</span><span style="color: #ffcc00">:\</span><span style="color: #ffffff">chemin</span><span style="color: #ffcc00">\</span><span style="color: #ffffff">vers</span><span style="color: #ffcc00">\</span><span style="color: #ffffff">nodejs</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Le r&#xE9;pertoire est sp&#xE9;cifi&#xE9;, la version de Node peut &#xEA;tre renvoy&#xE9;e avec l'instruction suivante.</p>
      </div>
      <div class="content-code">
        <strong>version de node</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
node&#xA0;</span><span style="color: #ffcc00">-</span><span style="color: #ffffff">v</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Nous pouvons installer JSDoc3 avec l'instruction suivante.</p>
      </div>
      <div class="content-code">
        <strong>install jsdoc</strong>
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
npm&#xA0;install&#xA0;jsdoc</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>Une fois install&#xE9; nous allons changer de r&#xE9;pertoire pour aller se positionner dans le r&#xE9;pertoire o&#xF9; se trouve l&#x2019;ex&#xE9;cutable de JSDoc.</p>
      </div>
      <div class="content-code">
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
cd&#xA0;node_modules</span><span style="color: #ffcc00">\.</span><span style="color: #ffffff">bin</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>La commande suivante renvoie la version de JSDoc.</p>
      </div>
      <div class="content-code">
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
jsdoc&#xA0;</span><span style="color: #ffcc00">-</span><span style="color: #ffffff">v</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>JSDoc est bien install&#xE9; et nous avons notre invite de commande, il suffit d'ex&#xE9;cuter la commande jsdoc suivit par le chemin vers un script comment&#xE9; nom de fichier inclus et la documentation g&#xE9;n&#xE9;r&#xE9;e se trouve par d&#xE9;faut dans le dossier out dans le m&#xEA;me r&#xE9;pertoire o&#xF9; se trouve l'ex&#xE9;cutable jsoc.</p>
      </div>
      <div class="content-code">
        <code><span style="color: #ffffff">
<span style="color: #ffffff">
jsdoc&#xA0;chemin</span><span style="color: #ffcc00">\</span><span style="color: #ffffff">vers</span><span style="color: #ffcc00">\</span><span style="color: #ffffff">le</span><span style="color: #ffcc00">\</span><span style="color: #ffffff">script</span><span style="color: #ffcc00">\</span><span style="color: #ffffff">script</span><span style="color: #ffcc00">.</span><span style="color: #ffffff">js</span>
</span>
</code>
      </div>
      <div class="content-box">
        <p>L'adresse http://usejsdoc.org/about-commandline.html fournit les d&#xE9;tails de l'utilisation de JSDoc3 en ligne de commande. Notre premi&#xE8;re documentation se trouve dans le dossier out.</p>
      </div>
    </div>
  </body>
</html>